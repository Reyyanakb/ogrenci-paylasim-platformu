@model mvcFinal2.ViewModels.DashboardViewModel

<div class="col-md-3 mb-4">
    <div class="card-custom p-0 overflow-hidden">
        <div class="p-4 bg-light text-center border-bottom">
            @if (Model.User?.ProfileImage != null && Model.User.ProfileImage.Length > 0)
            {
                <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.User.ProfileImage)" class="rounded-circle mb-2" alt="Avatar" style="width: 80px; height: 80px; object-fit: cover;">
            }
            else
            {
                <img src="@(!string.IsNullOrEmpty(Model.User?.ProfileImageUrl) ? Model.User.ProfileImageUrl : "https://via.placeholder.com/80")" class="rounded-circle mb-2" alt="Avatar" style="width: 80px; height: 80px; object-fit: cover;">
            }
            <h6 class="fw-bold mb-0">@(Model.User?.FullName ?? User.Identity?.Name ?? "Kullanıcı")</h6>
            <small class="text-muted">Öğrenci</small>
        </div>
        <div class="list-group list-group-flush">
            <a href="/Dashboard" class="list-group-item list-group-item-action border-0 py-3 @(Model.ActivePage == "Index" ? "active-link" : "")" style="@(Model.ActivePage == "Index" ? "background-color: var(--primary-color); color: black; font-weight: 600;" : "")">
                <i class="bi bi-person me-2"></i> Profilim & Özet
            </a>
            <a href="#" class="list-group-item list-group-item-action border-0 py-3">
                <i class="bi bi-list-ul me-2"></i> İlanlarım
            </a>
            <a href="/Dashboard/Favorites" class="list-group-item list-group-item-action border-0 py-3 @(Model.ActivePage == "Favorites" ? "active-link" : "")" style="@(Model.ActivePage == "Favorites" ? "background-color: var(--primary-color); color: black; font-weight: 600;" : "")">
                <i class="bi bi-heart me-2"></i> Favorilerim
            </a>
            <a href="/Dashboard/Purchases" class="list-group-item list-group-item-action border-0 py-3 @(Model.ActivePage == "Purchases" ? "active-link" : "")" style="@(Model.ActivePage == "Purchases" ? "background-color: var(--primary-color); color: black; font-weight: 600;" : "")">
                <i class="bi bi-bag-check me-2"></i> Satın Aldıklarım
            </a>
            <a href="/Dashboard/Messages" class="list-group-item list-group-item-action border-0 py-3 @(Model.ActivePage == "Messages" ? "active-link" : "")" style="@(Model.ActivePage == "Messages" ? "background-color: var(--primary-color); color: black; font-weight: 600;" : "")">
                <i class="bi bi-chat-dots me-2"></i> Mesajlarım 
                @if(Model.UnreadMessageCount > 0)
                {
                    <span class="badge bg-danger rounded-pill ms-auto">@Model.UnreadMessageCount</span>
                }
                
            </a>
            
            <a href="/Dashboard/Profile" class="list-group-item list-group-item-action border-0 py-3 @(Model.ActivePage == "Profile" ? "active-link" : "")" style="@(Model.ActivePage == "Profile" ? "background-color: var(--primary-color); color: black; font-weight: 600;" : "")">
                <i class="bi bi-gear me-2"></i> Profil Ayarları
            </a>



            @if(User.IsInRole("Admin"))
            {
                <a href="/Admin" class="list-group-item list-group-item-action border-0 py-3 text-primary fw-bold">
                    <i class="bi bi-shield-lock-fill me-2"></i> Yönetici Paneli
                </a>
            }
            <a href="/Account/Logout" class="list-group-item list-group-item-action border-0 py-3 text-danger">
                <i class="bi bi-box-arrow-right me-2"></i> Çıkış Yap
            </a>
        </div>
    </div>
</div>
